{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Packet = void 0;\n\nvar channel_1 = require(\"@terra-money/terra.proto/ibc/core/channel/v1/channel\");\n\nvar long_1 = __importDefault(require(\"long\"));\n\nvar json_1 = require(\"../../../../util/json\");\n\nvar Height_1 = require(\"../client/Height\");\n/** Packet defines a type that carries data across different chains through IBC */\n\n\nvar Packet =\n/** @class */\nfunction (_super) {\n  __extends(Packet, _super);\n  /**\n   * @param port_id port on the counterparty chain which owns the other end of the channel.\n   * @param channel_id channel end on the counterparty chain\n   */\n\n\n  function Packet(sequence, source_port, source_channel, destination_port, destination_channel, data, timeout_height, timeout_timestamp) {\n    var _this = _super.call(this) || this;\n\n    _this.sequence = sequence;\n    _this.source_port = source_port;\n    _this.source_channel = source_channel;\n    _this.destination_port = destination_port;\n    _this.destination_channel = destination_channel;\n    _this.data = data;\n    _this.timeout_height = timeout_height;\n    _this.timeout_timestamp = timeout_timestamp;\n    return _this;\n  }\n\n  Packet.fromAmino = function (_data) {\n    var sequence = _data.sequence,\n        source_port = _data.source_port,\n        source_channel = _data.source_channel,\n        destination_port = _data.destination_port,\n        destination_channel = _data.destination_channel,\n        data = _data.data,\n        timeout_height = _data.timeout_height,\n        timeout_timestamp = _data.timeout_timestamp;\n    return new Packet(sequence, source_port, source_channel, destination_port, destination_channel, data, timeout_height ? Height_1.Height.fromAmino(timeout_height) : undefined, timeout_timestamp);\n  };\n\n  Packet.prototype.toAmino = function () {\n    var _a = this,\n        sequence = _a.sequence,\n        source_port = _a.source_port,\n        source_channel = _a.source_channel,\n        destination_port = _a.destination_port,\n        destination_channel = _a.destination_channel,\n        data = _a.data,\n        timeout_height = _a.timeout_height,\n        timeout_timestamp = _a.timeout_timestamp;\n\n    var res = {\n      sequence: sequence,\n      source_port: source_port,\n      source_channel: source_channel,\n      destination_port: destination_port,\n      destination_channel: destination_channel,\n      data: data,\n      timeout_height: timeout_height ? timeout_height.toAmino() : undefined,\n      timeout_timestamp: timeout_timestamp\n    };\n    return res;\n  };\n\n  Packet.fromData = function (_data) {\n    var sequence = _data.sequence,\n        source_port = _data.source_port,\n        source_channel = _data.source_channel,\n        destination_port = _data.destination_port,\n        destination_channel = _data.destination_channel,\n        data = _data.data,\n        timeout_height = _data.timeout_height,\n        timeout_timestamp = _data.timeout_timestamp;\n    return new Packet(sequence, source_port, source_channel, destination_port, destination_channel, data, timeout_height ? Height_1.Height.fromData(timeout_height) : undefined, Number.parseInt(timeout_timestamp));\n  };\n\n  Packet.prototype.toData = function () {\n    var _a = this,\n        sequence = _a.sequence,\n        source_port = _a.source_port,\n        source_channel = _a.source_channel,\n        destination_port = _a.destination_port,\n        destination_channel = _a.destination_channel,\n        data = _a.data,\n        timeout_height = _a.timeout_height,\n        timeout_timestamp = _a.timeout_timestamp;\n\n    var res = {\n      sequence: sequence,\n      source_port: source_port,\n      source_channel: source_channel,\n      destination_port: destination_port,\n      destination_channel: destination_channel,\n      data: data,\n      timeout_height: timeout_height ? timeout_height.toData() : undefined,\n      timeout_timestamp: timeout_timestamp.toFixed()\n    };\n    return res;\n  };\n\n  Packet.fromProto = function (proto) {\n    return new Packet(proto.sequence.toNumber(), proto.sourcePort, proto.sourceChannel, proto.destinationPort, proto.destinationChannel, Buffer.from(proto.data).toString('base64'), proto.timeoutHeight ? Height_1.Height.fromProto(proto.timeoutHeight) : undefined, proto.timeoutTimestamp.toNumber());\n  };\n\n  Packet.prototype.toProto = function () {\n    var _a = this,\n        sequence = _a.sequence,\n        source_port = _a.source_port,\n        source_channel = _a.source_channel,\n        destination_port = _a.destination_port,\n        destination_channel = _a.destination_channel,\n        data = _a.data,\n        timeout_height = _a.timeout_height,\n        timeout_timestamp = _a.timeout_timestamp;\n\n    return channel_1.Packet.fromPartial({\n      sequence: long_1.default.fromNumber(sequence),\n      sourcePort: source_port,\n      sourceChannel: source_channel,\n      destinationPort: destination_port,\n      destinationChannel: destination_channel,\n      data: Buffer.from(data, 'base64'),\n      timeoutHeight: timeout_height ? timeout_height.toProto() : undefined,\n      timeoutTimestamp: long_1.default.fromNumber(timeout_timestamp)\n    });\n  };\n\n  return Packet;\n}(json_1.JSONSerializable);\n\nexports.Packet = Packet;","map":{"version":3,"mappings":"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","names":["__extends","sequence","source_port","source_channel","destination_port","destination_channel","data","timeout_height","timeout_timestamp","_super","_this","Packet","_data","Height_1","fromAmino","undefined","res","toAmino","fromData","Number","parseInt","toData","toFixed","proto","toNumber","sourcePort","sourceChannel","destinationPort","destinationChannel","Buffer","from","toString","timeoutHeight","fromProto","timeoutTimestamp","channel_1","fromPartial","long_1","fromNumber","toProto","json_1","exports"],"sources":["../../../../../src/core/ibc/msgs/channel/Packet.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}